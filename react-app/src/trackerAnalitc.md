1. Цель

Автоматически прогнозировать количество дней до достижения цели по ПТС, учитывая динамический winrate, который может изменяться в зависимости от реальной статистики пользователя.

2. Входные данные

PTS_current — текущий ПТС

PTS_target — целевой ПТС

PTS_gain_per_win, PTS_loss_per_loss — прирост/потери ПТС за матч

matches_per_day — среднее количество матчей за день

История матчей — количество игр, побед и поражений по дням

3. Алгоритм адаптивного прогноза
3.1. Расчёт текущего фактического winrate
𝑊
𝑅
𝑎
𝑐
𝑡
𝑢
𝑎
𝑙
=
кол-во побед
кол-во сыгранных матчей
WR
actual
	​

=
кол-во сыгранных матчей
кол-во побед
	​


WR_actual пересчитывается после каждого завершённого игрового дня.

Если данных ещё мало (например, меньше 5 матчей), можно использовать предполагаемый WR по диапазону ПТС для первичного прогноза.

3.2. Динамическая корректировка прогноза

Прогноз количества матчей до цели:

Matches_needed_total
=
∑
𝑖
=
1
𝑛
𝑃
𝑇
𝑆
𝑢
𝑝
𝑝
𝑒
𝑟
−
𝑃
𝑇
𝑆
𝑙
𝑜
𝑤
𝑒
𝑟
𝑃
𝑇
𝑆
_
𝑎
𝑣
𝑔
_
𝑝
𝑒
𝑟
_
𝑚
𝑎
𝑡
𝑐
ℎ
𝑖
Matches_needed_total=
i=1
∑
n
	​

PTS_avg_per_match
i
	​

PTS
upper
	​

−PTS
lower
	​

	​


PTS_avg_per_match_i теперь рассчитывается как средний прирост за матч с учётом фактического winrate на данный момент:

𝑃
𝑇
𝑆
_
𝑎
𝑣
𝑔
_
𝑝
𝑒
𝑟
_
𝑚
𝑎
𝑡
𝑐
ℎ
𝑖
=
𝑊
𝑅
𝑐
𝑢
𝑟
𝑟
𝑒
𝑛
𝑡
⋅
𝑃
𝑇
𝑆
_
𝑔
𝑎
𝑖
𝑛
_
𝑝
𝑒
𝑟
_
𝑤
𝑖
𝑛
−
(
1
−
𝑊
𝑅
𝑐
𝑢
𝑟
𝑟
𝑒
𝑛
𝑡
)
⋅
𝑃
𝑇
𝑆
_
𝑙
𝑜
𝑠
𝑠
_
𝑝
𝑒
𝑟
_
𝑙
𝑜
𝑠
𝑠
PTS_avg_per_match
i
	​

=WR
current
	​

⋅PTS_gain_per_win−(1−WR
current
	​

)⋅PTS_loss_per_loss

WR_current может быть:

WR_actual, если есть достаточно данных

Или среднее между WR_actual и предполагаемым WR по диапазону ПТС (плавное сглаживание для первых дней)

3.3. Количество игровых дней
𝐷
𝑎
𝑦
𝑠
_
𝑛
𝑒
𝑒
𝑑
𝑒
𝑑
=
𝑀
𝑎
𝑡
𝑐
ℎ
𝑒
𝑠
_
𝑛
𝑒
𝑒
𝑑
𝑒
𝑑
_
𝑡
𝑜
𝑡
𝑎
𝑙
𝑚
𝑎
𝑡
𝑐
ℎ
𝑒
𝑠
_
𝑝
𝑒
𝑟
_
𝑑
𝑎
𝑦
Days_needed=
matches_per_day
Matches_needed_total
	​


Пересчитывается каждый день с учётом обновлённого WR_actual.

Позволяет прогнозу адаптироваться, если пользователь выигрывает чаще или реже, чем ожидалось.

4. Визуализация

Дашборд показывает «При текущем winrate цель будет достигнута через X дней», обновляя прогноз после каждого игрового дня.

Можно отображать интервал прогноза, чтобы пользователь видел возможный разброс дней при изменении winrate:

Минимальный прогноз: если winrate выше текущего

Максимальный прогноз: если winrate ниже текущего

5. Примечания по реализации

Алгоритм должен быть устойчив к малому количеству матчей, плавно корректируя WR.

Для первых дней можно использовать гибрид: предполагаемый WR + фактический WR.

Можно добавить визуальный график, показывающий динамику прогноза дней — как меняется прогноз с ростом/падением WR_actual.